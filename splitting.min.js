!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.Splitting=n()}(this,function(){"use strict";function e(e){return n(e).map(function(e,n){return e._splitting||(e._splitting={el:e},e.classList&&e.classList.add("splitting")),e._splitting})}function n(e,n){return e&&0!=e.length?(e.nodeName?e=[e]:e.charAt&&(e=(n||document).querySelectorAll(e)),[].slice.call(e)):[]}function t(e,n,t){e.style.setProperty("--"+n,t)}function r(e,n,r){return r&&(e[n+"s"]=r,t(e.el,n+"-total",r.length),r.map(function(e,r){t(e,n+"-index",r)})),e}function i(e,t,r,o){var c=e.parentNode;if(c){var u=document.createTextNode("");c.replaceChild(u,e)}e.normalize();var l=n(e.childNodes).reduce(function(n,c){if(c&&c.childNodes&&c.childNodes.length)return e.appendChild(c),n.concat(i(c,t,r,o));var u=(c.wholeText||"").trim();return u.length?(e.removeChild(c),n.concat(u.split(r).map(function(n){var r=document.createElement("span");return r.className=t,r.innerText=n,r.setAttribute("data-"+t,n),e.appendChild(r),o&&r.insertAdjacentText("afterend"," "),r}))):(e.appendChild(c),n)},[]);return c&&c.replaceChild(e,u),l}function o(e){var n,r=[],i=-1,o=-1;return e.map(function(e){n=e.offsetTop,n>o&&(i++,o=n),r[i]=r[i]||[],r[i].push(e),t(e,"line-index",i)}),r}return e.$=n,e.index=r,e.split=i,e.children=function(t,i,o){return e(t).map(function(e){return r(e,o,n(i,e.el))})},e.words=function(n){return e(n).map(function(e,n){return e.words?e:r(e,"word",i(e.el,"word",/\s+/,!0))})},e.chars=function(n){return e.words(n).map(function(e){return e.chars?e:r(e,"char",e.words.reduce(function(e,n,t){return e.concat(i(n,"char",""))},[]))})},e.lines=function(n,r,i){return i=r?i||"item":"word",(r?e.children(n,r,i):e.words(n)).map(function(e){return e.lines=o(e[i+"s"]),t(e.el,"line-total",e.lines.length),e})},e.fromString=function(n,t){t=t||{};var r=document.createElement("span");return r.innerHTML=n,e[t.type||"chars"].apply(null,[r].concat(t.args||[])),t.element?r:r.outerHTML},e});